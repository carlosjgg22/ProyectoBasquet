<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link href="https://fonts.googleapis.com/css?family=Cantarell&display=swap" rel="stylesheet">
<dom-module id="registro-jugador"> 

    <template>
<div class=panel-principal>
    <div class="botones">
        <h1 class="lb-titulo">Datos del Jugador</h1>
        <label class="lb-nombre">Nombre:</label><input class="input-nombre" type=text id="nombre" value="{{nombre::input}}">
       <label class="lb-apellido">Apellido:</label><input class="input-apellido" type=text id="apellido" value="{{apellido::input}}">
       <br> <label class="lb-edad">Edad:</label><input class="input-edad"type=text id="edad" value="{{edad::input}}">
       <br> <label class="lb-altura">Altura:</label class="lb-altura"><input class="input-altura"type=text id="altura" placeholder="0.00"  value="{{altura::input}}">
       <br> <label class="lb-peso">Peso:</label><input type=text  class="input-peso" id="peso" placeholder="00.00" value="{{peso::input}}">
    
       <br><label class="lb-posicion">Posición:</label><select id="posicion" value="{{posicion::input}}">
        <br><option selected> Seleccionar</option>
            <option value="Base"> Base</option>
            <option value="Ayuda Base" >Ayuda Base</option>
            <option value="Ala"> Ala</option>
            <option value="Ala Pivot">Ala Pivot</option>
            <option value="Pivot">Pivot</option>
       </select>
       
       <br> <button class="btn-registrar" on-click="registrarJugador">Cargar Datos </button>
       <br> <button class="btn-mostrar" on-click="mostrar">Cargar Datos para Calificaciones</button>
    
       <button class="btn-mostrar" on-click="sortCalification">Seleccionar Jugadores</button>
    </div>
        

    <div class="panel-secundario">
<table class="tabla-base">
    <thead>
        Jugadores a Calificar por Posición Base
    </thead>
    
    <tr>
        <th class="th-nombre">Nombre</th>
        <th class="th-apellido">Apellido</th>
        <th class="th-posicion">Posición</th>
        <th class="th-cali">Calificación</th>
    </tr>

       <template is="dom-repeat" id="lista" items={{seleccionBase}} as="item">
        <tr>
        <td class="td-nombre">{{item.nombre}}</td>
        <td class="td-apellido">{{item.apellido}}</td>
        <td class="td-posicion">{{item.posicion}}</td>
        <td class="td-cali"> <input class="input-cali" type="number" placeholder="000"  name="{{item.id}}" id="{{item.id}}" value={{item.calificacion::input}}></td>
        </tr>
        </template>
    </table>


    <table class="tabla-ala">
        <thead>
            Jugadores a Calificar por Posición Ala
        </thead>
        
        <tr>
            <th class="th-nombre">Nombre</th>
            <th class="th-apellido">Apellido</th>
            <th class="th-posicion">Posición</th>
            <th class="th-cali">Calificación</th>
        </tr>
    
           <template is="dom-repeat" id="lista" items={{seleccionAla}} as="item">
            <tr>
            <td class="td-nombre">{{item.nombre}}</td>
            <td class="td-apellido">{{item.apellido}}</td>
            <td class="td-posicion">{{item.posicion}}</td>
            <td class="td-cali"> <input class="input-cali" type="number" placeholder="000"  name="{{item.id}}" id="{{item.id}}" value={{item.calificacion::input}}></td>
            </tr>
            </template>
        </table>
    

        <table class="tabla-pivot">
            <thead>
                Jugadores a Calificar por Posición Pivot
            </thead>
            
            <tr>
                <th class="th-nombre">Nombre</th>
                <th class="th-apellido">Apellido</th>
                <th class="th-posicion">Posición</th>
                <th class="th-cali">Calificación</th>
            </tr>
        
               <template is="dom-repeat" id="lista" items={{seleccionPivot}} as="item">
                <tr>
                <td class="td-nombre">{{item.nombre}}</td>
                <td class="td-apellido">{{item.apellido}}</td>
                <td class="td-posicion">{{item.posicion}}</td>
                <td class="td-cali"> <input class="input-cali" type="number" placeholder="000"  name="{{item.id}}" id="{{item.id}}" value={{item.calificacion::input}}></td>
                </tr>
                </template>
            </table>
        
        
            <table class="tabla-ayudabase">
                <thead>
                    Jugadores a Calificar por Posición Ayuda Base
                </thead>
                
                <tr>
                    <th class="th-nombre">Nombre</th>
                    <th class="th-apellido">Apellido</th>
                    <th class="th-posicion">Posición</th>
                    <th class="th-cali">Calificación</th>
                </tr>
            
                   <template is="dom-repeat" id="lista" items={{seleccionAyudaBase}} as="item">
                    <tr>
                    <td class="td-nombre">{{item.nombre}}</td>
                    <td class="td-apellido">{{item.apellido}}</td>
                    <td class="td-posicion">{{item.posicion}}</td>
                    <td class="td-cali"> <input class="input-cali" type="number" placeholder="000"  name="{{item.id}}" id="{{item.id}}" value={{item.calificacion::input}}></td>
                    </tr>
                    </template>
                </table>
            
      
                <table class="tabla-ayudabase">
                    <thead>
                        Jugadores a Calificar por Posición Ala Pivot
                    </thead>
                    
                    <tr>
                        <th class="th-nombre">Nombre</th>
                        <th class="th-apellido">Apellido</th>
                        <th class="th-posicion">Posición</th>
                        <th class="th-cali">Calificación</th>
                    </tr>
                
                       <template is="dom-repeat" id="lista" items={{seleccionAlaPivot}} as="item">
                        <tr>
                        <td class="td-nombre">{{item.nombre}}</td>
                        <td class="td-apellido">{{item.apellido}}</td>
                        <td class="td-posicion">{{item.posicion}}</td>
                        <td class="td-cali"> <input class="input-cali" type="number" placeholder="000"  name="{{item.id}}" id="{{item.id}}" value={{item.calificacion::input}}></td>
                        </tr>
                        </template>
                    </table>
                
          
       
          
       <br> <button class="btn-calificacion" on-click="cargarCalificacion">Cargar Calificaciones</button>

        <table style="width:100%" border="1">
            <caption>Selección de Equipos</caption>
            <template is="dom-repeat" id="lista" items={{jugadorSeleccionado}} as="item">
           <tr>
           <th>Ficha Técnica</th>
           <th colspan="3">{{item.nombre}} {{item.apellido}}</th>
           
           </tr>
           
           <tr>
           <td rowspan="5"><img src="/assets/usuario..png"width="160" height="160" ></td>
           <td>Edad:</td>
           <td>{{item.edad}}</td>
           
           </tr>
           
           <tr>
           <td>Peso</td>
           <td>{{item.peso}}</td>
           </tr>
           
           <tr>
           <td>Altura</td>
           <td>{{item.altura}}</td>
           </tr>
           <tr>
           <td>Posición</td>
           <td>{{item.posicion}}</td>
           </tr>
           <tr>
           <td>Calificación</td>
           <td>{{item.calificacion}}</td>
           </tr>
        </template>
           </table>
           

</div>


</div>


        <style>
    
            .botones {
        margin: 0 auto;
        width: 500px;
        height: 500px;
        padding: 30px;
        color:#999;
        border-radius: 4px;
        float:left;
        margin-left: 10px;
       
            }

            .table-base{
    table-layout: fixed;
    width: 250px;
}

.th-titulo{
    width: 50%;
}

.th-nombre, .th-apellido, .th-cali, .th-posicion, .td-nombre, .td-apellido, .td-posicion, .td-cali {
    
    width: 100px;
    word-wrap: break-word;
    padding: 1px;
}

            .td-cali{
                text-align:center;
            }

        .td-nombre{
            text-align: center;
        }

            


.tabla-jugadores, .tr, .th{
  
  border: 1px solid black;


}



.panel-principal{
    margin: auto;
    width: 1200px;
    height: 900px;
}
            .panel-secundario{

        margin: 0 auto;
        width: 600px;
        height: 300px;
        padding: 10px;
        color:aliceblue;
        border-radius: 4px;
        font-family: 'Cantarell', sans-serif;
        float: left;
        margin-left: 40px;
        
                
            }

        .input-nombre, .input-edad, .input-altura, .input-peso, .input-apellido, .input-cat{
         border: solid 1px #ccc; 
         padding: 10px;
         font-size: 15px;
         font-family: 'Cantarell', sans-serif;
        margin: 0 auto;
        color:black;
        border-radius: 10px; 
        margin-bottom:20px; 
        width:100%;
            }

.input-cali{
            border: solid 1px #ccc; 
         padding: 2px;
         font-size: 15px;
         font-family: 'Cantarell', sans-serif;
        margin: 0 auto;
        color:black;
        border-radius: 10px; 
        margin-bottom:10px; 
        width:50%;
}
            #posicion{
                border: solid 1px #ccc; 
         padding: 10px;
         font-size: 15px;
         font-family: 'Cantarell', sans-serif;
        margin: 0 auto;
        color:black;
        border-radius: 10px; 
        margin-bottom:20px; 
        width:105%;
     
            }

        .btn-registrar, .btn-mostrar, .btn-calificacion{
        padding:10px;
        border: solid 1px #ccc; 
        margin-bottom:10px;
        margin-top: -60px;
        width:105%;
        border-radius: 10px; 
        font-family: 'Cantarell', sans-serif;
            }

            .btn-calificacion{
        padding:10px;
        border: solid 1px #ccc; 
        width:50%;
        border-radius: 10px; 
        font-family: 'Cantarell', sans-serif;
            }
            .lb-nombre, .lb-apellido, .lb-edad, .lb-peso, .lb-altura, .lb-posicion{
            padding:20px;
            margin-top: -24px;
            color: aliceblue;
            font-size: 20px;
            font-family: 'Cantarell', sans-serif;
            }

             .lb-titulo{
                   padding:20px;
            margin-top: -40px;
            color: aliceblue;
            font-size: 35px;
            font-family: 'Cantarell', sans-serif;
            text-align: center;
            margin-bottom:1px;
            }


            .botones{
                width: 500px;
             margin:auto;
            margin-top: 20px;
             padding:20px;
            box-shadow: 1 1 20px 1px rgba(1,4,5,0.4);
            position:relative; 
            font-family: 'Cantarell', sans-serif;

            }

            </style>
        
    </template>



<script>
var contadorId=0;

class RegistroJugador extends Polymer.Element{

    static get is(){
        return 'registro-jugador';
    }

    static get properties(){
        return {
            jugadores:{
            type: Object,
                    value:()=> {
                        return{
                            id:Number,
                            nombre: String,
                            apellido: String,
                            edad:Number,
                            altura:Number,
                            peso:Number,
                            posicion:String,
                            calificacion:Number
                        }
                      }
                },

                
            jugadorCargado:{
                    value(){
                        return[
                        ];
                    }
                    }, 

                seleccionBase:{
                    value(){
                        return[
                        ];
                    }
                    },

                    seleccionAla:{
                    value(){
                        return[
                        ];
                    }
                    }, 

                    seleccionPivot:{
                    value(){
                        return[
                        ];
                    }
                    },

                    seleccionAyudaBase:{
                    value(){
                        return[
                        ];
                    }
                    },

                    seleccionAlaPivot:{
                    value(){
                        return[
                        ];
                    }
                    },

                    calificacion:{
                        type:Number
                    },

                    jugadorSeleccionado:{
                    value(){
                        return[
                        ];
                    }
                    }

    }

    };





registrarJugador(){

    let listaAuxiliar={
        id:contadorId,
        nombre:this.nombre,
        apellido:this.apellido,
        edad:this.edad,
        altura:this.altura,
        peso:this.peso,
        posicion:this.posicion,
        calificacion:0
    }

if(this.jugadorCargado.length<25){

this.push('jugadorCargado', listaAuxiliar); 
contadorId=contadorId+1;
alert("Jugador cargado exitosamente")
} else{
    alert("ha excedido el número de jugadores registrados")
    //console.log(this.jugadorCargado);
}

}

mostrar(){
    

    let listaAuxiliar2={
     
       nombre:this.nombre,
        apellido:this.apellido,
        edad:this.edad,
        altura:this.altura,
        peso:this.peso,
        posicion:this.posicion,
        calificacion:this.calificacion
    }

        this.jugadorCargado.forEach(element => {
            if((element.posicion=='Base')&&(this.seleccionBase.length<5)){
                this.push('seleccionBase', element);

                }
        });
      
    
        console.log(this.seleccionBase);

        this.jugadorCargado.forEach(element => {
            if((element.posicion=='Ala')&&(this.seleccionAla.length<5)){
                this.push('seleccionAla', element);
            }
        });
      
    
        console.log(this.seleccionAla);

        this.jugadorCargado.forEach(element => {
            if((element.posicion=='Ala Pivot')&&(this.seleccionAlaPivot.length<5)){
                this.push('seleccionAlaPivot', element);
            }
        });
      
    
    console.log(this.seleccionAlaPivot);

        this.jugadorCargado.forEach(element => {
            if((element.posicion=='Ayuda Base')&&(this.seleccionAyudaBase.length<5)){
                this.push('seleccionAyudaBase', element);
            }
        });
      
    
    console.log(this.seleccionAyudaBase);

   
        this.jugadorCargado.forEach(element => {
            if((element.posicion=='Pivot')&&(this.seleccionPivot.length<5)){
                this.push('seleccionPivot', element);
            }
        });
      
    
    console.log(this.seleccionPivot);
}

    


    mostrarJson(){
        //guardo el arreglo en una variable transformanfdolo a json 

      var listaJson= JSON.stringify(this.seleccionBase); 
       
        //almaceno en local storage
       
        localStorage.setItem("listaBase", listaJson);

            console.log(listaJson);

            var nuevo=JSON.parse(localStorage.getItem("listaBase"));
            console.log(nuevo);
            
            const resultado = nuevo.find(seleccion=>seleccion.nombre=='pepito');

            console.log(resultado);
        }
        
    
        cargarCalificacion(){
            var listaJson= JSON.stringify(this.seleccionBase);
            localStorage.setItem("listaBase", listaJson);
            
alert('Las Calificaciones han sido cargadas')
           // let referenciaInput= document.getElementsByName("seleccion").value;
            //console.log(referenciaInput)
        //console.log(this.calificacion)
    
       
        }

        sortCalification(){

            //seleccionar la notas de la categoria base
            this.seleccionBase.sort(function(a,b){
                return b.calificacion-a.calificacion;
            });

           
           for(var i=0;i<this.seleccionBase.length-2;i++){
               this.push('jugadorSeleccionado',this.seleccionBase[i]);
           }

           //seleccionar las notas de la categoria Pivot

        this.seleccionPivot.sort(function(a,b){
                return b.calificacion-a.calificacion;
            });

           
           for(var i=0;i<this.seleccionPivot.length-2;i++){
               this.push('jugadorSeleccionado',this.seleccionPivot[i]);
           }

           //seleccionar las notas de la categoria Ala

           this.seleccionAla.sort(function(a,b){
                return b.calificacion-a.calificacion;
            });

           
           for(var i=0;i<this.seleccionAla.length-2;i++){
               this.push('jugadorSeleccionado',this.seleccionAla[i]);
           }
           
           //seleccionar las notas de la categoria ayudabase
           this.seleccionAyudaBase.sort(function(a,b){
                return b.calificacion-a.calificacion;
            });

           
           for(var i=0;i<this.seleccionAyudaBase.length-2;i++){
               this.push('jugadorSeleccionado',this.seleccionAyudaBase[i]);
           }

        //seleccionar las notas de la categoria ala pivot 
        
        this.seleccionAlaPivot.sort(function(a,b){
                return b.calificacion-a.calificacion;
            });

           
           for(var i=0;i<this.seleccionAlaPivot.length-2;i++){
               this.push('jugadorSeleccionado',this.seleccionAlaPivot[i]);
           }

           console.log(this.jugadorSeleccionado)
        }



    }






window.customElements.define(RegistroJugador.is, RegistroJugador);
</script>

</dom-module>
